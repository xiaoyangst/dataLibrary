命令格式：find [搜索路径] [匹配条件] [操作]

# 匹配条件

## 路径相关

| 条件        | 含义                         | 示例                  |
| ----------- | ---------------------------- | --------------------- |
| `-name`     | 按文件名匹配（区分大小写）   | `-name "*.txt"`       |
| `-iname`    | 按文件名匹配（不区分大小写） | `-iname "*.PDF"`      |
| `-path`     | 匹配完整路径                 | `-path "./log/*.txt"` |
| `-ipath`    | 匹配完整路径（忽略大小写）   | `-ipath "*/LOG/*"`    |
| `-regex`    | 使用正则匹配路径             | `-regex ".*\.log"`    |
| `-maxdepth` | 设置搜索最大深度（层级）     | `-maxdepth 1`         |
| `-mindepth` | 设置搜索最小深度             | `-mindepth 2`         |

## 类型相关

| 条件      | 含义         | 示例     |
| --------- | ------------ | -------- |
| `-type f` | 普通文件     | 查找文件 |
| `-type d` | 目录         | 查找目录 |
| `-type l` | 符号链接     | 查找链接 |
| `-type c` | 字符设备文件 |          |
| `-type b` | 块设备文件   |          |

## 时间相关

| 条件        | 含义                 | 示例              |
| ----------- | -------------------- | ----------------- |
| `-mtime +N` | 修改时间在 N 天前    | `-mtime +7`       |
| `-mtime -N` | 修改时间在 N 天内    | `-mtime -1`       |
| `-atime`    | 最后访问时间         |                   |
| `-ctime`    | inode 或权限变更时间 |                   |
| `-newer`    | 比某个文件更新       | `-newer file.txt` |

## 大小相关

| 条件          | 含义              | 示例 |
| ------------- | ----------------- | ---- |
| `-size +1G`   | 大于 1GB 的文件   |      |
| `-size -100k` | 小于 100KB 的文件 |      |
| `-size 0`     | 空文件            |      |

## 权限/所有者相关

| 条件         | 含义             | 示例 |
| ------------ | ---------------- | ---- |
| `-perm 644`  | 精确权限匹配     |      |
| `-perm -u=r` | 拥有者具有读权限 |      |
| `-user root` | 属主是 root      |      |
| `-group www` | 属组是 www       |      |

## 文件状态

| 条件          | 含义           | 示例 |
| ------------- | -------------- | ---- |
| `-empty`      | 空文件或空目录 |      |
| `-executable` | 可执行文件     |      |
| `-readable`   | 可读文件       |      |
| `-writable`   | 可写文件       |      |

## 逻辑操作符

| 操作符        | 用法与意义                 |
| ------------- | -------------------------- |
| `-a`          | 与（and，可省略）          |
| `-o`          | 或（or）                   |
| `!` 或 `-not` | 非（取反）                 |
| `\(` `\)`     | 括号用于组合条件（需转义） |

# 操作

| 操作       | 说明                                                     |
| ---------- | -------------------------------------------------------- |
| `-print`   | 默认操作：输出匹配到的文件路径（通常省略时也会自动执行） |
| `-exec`    | 对匹配的每个文件执行指定命令（可执行多个动作）           |
| `-ok`      | 类似 `-exec`，但执行前会询问用户确认                     |
| `-delete`  | 删除匹配的文件或目录（**非常危险，慎用**）               |
| `-ls`      | 显示匹配文件的详细信息（类似 `ls -l`）                   |
| `-quit`    | 找到第一个匹配结果后立刻退出                             |
| `-fprintf` | 类似 `-print`，但将结果写入文件（较少使用）              |
| `-fls`     | 类似 `-ls`，但将结果写入文件                             |

重点看看 -exec 的使用：

```c++
find . -name "*.sh" -exec chmod +x {} \;
```

`{}` 是当前文件，`\;` 是命令结束标志。

# find、locate、whereis和which总结及适用场景分析

| 命令      | 工作原理                              | 查找对象               | 是否实时查找 | 是否需要更新数据库  | 查找速度 | 是否支持复杂条件 |
| --------- | ------------------------------------- | ---------------------- | ------------ | ------------------- | -------- | ---------------- |
| `find`    | 逐个扫描文件系统                      | 任意文件或目录         | ✅ 实时       | ❌ 不需要            | ⏳ 慢     | ✅ 是             |
| `locate`  | 依赖系统预构建的文件数据库（mlocate） | 所有已被索引的文件路径 | ❌ 非实时     | ✅ 需要 (`updatedb`) | ⚡️ 快     | ❌ 否（简单匹配） |
| `whereis` | 查找二进制、man 手册、源代码等文件    | 特定类型（程序+文档）  | ❌ 非实时     | ❌ 一般不需要        | ⚡️ 快     | ❌ 否（固定路径） |
| `which`   | 查找环境变量 PATH 中的命令位置        | 可执行文件（命令）     | ✅ 实时       | ❌ 不需要            | ⚡️ 快     | ❌ 否             |

